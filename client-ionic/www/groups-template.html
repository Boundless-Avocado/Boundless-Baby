<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Groups</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">

    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <script src="js/groups-template.js"></script>

    <script src="../../client/lib/angular/angular.js"></script>
    <script src="../../client/lib/angular-ui-router/release/angular-ui-router.js"></script>
    <script src='../../client/app/auth/auth.js'></script>
    <script src='../../client/app/groups/groups.js'></script>
    <script src='../../client/app/services/services.js'></script>
    <script src='../../client/app.js'></script>
    <script src="../../client/app.js"></script>

    <!-- Needed for Cordova/PhoneGap (will be a 404 during development) -->
    <script src="cordova.js"></script>
  </head>
  <body ng-app="boundless" ng-controller="GroupTemplateController">
    <ion-side-menus>
      {% raw %}
      <!-- Center content -->
      <ion-side-menu-content>
        <ion-header-bar class="bar-balanced">
          <button class="button button-icon">
            <i class="icon ion-navicon"></i>
          </button>
          <h1 class="title">Groups {{groups.name}}</h1>
          <!-- New Group button-->
          <button class="button button-icon" ng-click="newGroup()">
            <i class="icon ion-compose"></i>
          </button>
        </ion-header-bar>
        <ion-content scroll="false">
          <ion-list>
            <ion-item ng-repeat="group in groups" ng-controller="GroupsController">
              
                <div>
                  {{group.name}}
                  <button class="button button-balanced" ng-click="joinGroup(group)">Join</button>
                  <button class="button button-balanced" ng-click="pingGroup(group)">Ping</button>
                  <button class="button button-balanced" ng-click="leaveGroup(group)">Leave</button>
                  <button class="button button-balanced" ng-click="openInviteModal(group)">Invite</button>
                </div>
            </ion-item>
          </ion-list>
        </ion-content>
      </ion-side-menu-content>

    </ion-side-menus>

 <script id="new-group.html" type="text/ng-template">

   <div class="modal">

     <!-- Modal header bar -->
     <ion-header-bar class="bar-secondary">
       <h1 class="title">New Group</h1>
       <button class="button button-clear button-balanced" ng-click="closeNewGroup()">Cancel</button>
     </ion-header-bar>

     <!-- Modal content area -->
     <ion-content>

       <form ng-controller="GroupsController" ng-submit="createGroup()">
         <div class="list">
           <label class="item item-input">
             <input type="text" placeholder="What's your group name?" ng-model="group.name">
           </label>
           <label class="item item-input">
             <input type="text" placeholder="Describe your group?" ng-model="group.description">
           </label>
         </div>
         <div class="padding">
           <button type="submit" class="button button-block button-balanced" ng-click="displayGroup(group)">Create Group</button>
         </div>
       </form>

     </ion-content>

   </div>

 </script>

  <script id="invite-friends.html" type="text/ng-template">

   <div class="modal">

     <!-- Modal header bar -->
     <ion-header-bar class="bar-secondary">
       <h1 class="title">Invite your friend!</h1>
       <button class="button button-clear button-energized" ng-click="closeInviteModal()">Cancel</button>
     </ion-header-bar>

     <!-- Modal content area -->
     <ion-content>

       <form name="inviteForm" ng-controller="GroupsController" ng-submit="inviteToGroup()">
         <div class="list">
           <label class="item item-input">
             <input type="text" placeholder="What's your friend's name?" ng-model="friend.name">
           </label>
           <label class="item item-input">
             <input name="number" type="number" placeholder="What's your friends phone number?" ng-model="friend.number">
             <span class="error" ng-show="inviteForm.number.$error.number">Not a valid number!</span>

           </label>
         </div>
         <div class="padding">
           <button type="submit" class="button button-block button-energized">Invite Friend</button>
         </div>
       </form>

     </ion-content>

   </div>
  </script> 
 </body>
</html>